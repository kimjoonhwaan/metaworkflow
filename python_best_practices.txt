Python 스크립트 모범 사례

워크플로우에서 사용되는 Python 스크립트의 모범 사례를 설명합니다.

1. 입력 처리
```python
import json
import sys

# 변수 파싱
variables = {}
if '--variables' in sys.argv:
    idx = sys.argv.index('--variables')
    if idx + 1 < len(sys.argv):
        variables = json.loads(sys.argv[idx + 1])
```

2. 에러 처리
```python
try:
    # 메인 로직
    result = process_data(variables.get('input_data'))
    
    # 성공 결과 출력 (stdout)
    print(json.dumps({
        'status': 'success',
        'result': result
    }))
    
except Exception as e:
    # 에러 로그 출력 (stderr)
    print(f"Error: {e}", file=sys.stderr)
    
    # 에러 결과 출력 (stdout)
    print(json.dumps({
        'status': 'error',
        'error': str(e)
    }))
    sys.exit(1)
```

3. 로깅
- 중요한 정보는 stderr로 출력
- 최종 결과는 stdout으로만 출력
- JSON 형식을 유지하세요

4. 데이터 검증
- 입력 데이터 유효성 검사
- 타입 체크
- 필수 필드 확인

5. 성능 고려사항
- 대용량 데이터 처리 시 청크 단위로 처리
- 메모리 사용량 모니터링
- 타임아웃 설정

6. 보안
- 사용자 입력 검증
- SQL 인젝션 방지
- 파일 경로 검증

이러한 모범 사례를 따라 안전하고 효율적인 Python 스크립트를 작성하세요.
